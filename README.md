# MODAPTO System

MODAPTO represents a significant advancement in industrial digitalization, born from the recognition that modern manufacturing faces unprecedented challenges in efficiency, adaptability, and competitiveness. This comprehensive platform emerged from extensive research and collaboration between leading European technology institutions, aiming to bridge the gap between traditional manufacturing processes and the digital transformation requirements of Industry 4.0.

## Overview

The MODAPTO System addresses the complex needs of manufacturing organizations seeking to harness the power of digital technologies without the overwhelming complexity typically associated with such transformations. At its core, the platform recognizes that successful manufacturing optimization requires more than just data collection – it demands intelligent interpretation, actionable insights, and seamless integration with existing workflows.

Our approach centers on the understanding that every manufacturing environment is unique, with distinct challenges, constraints, and opportunities. Rather than offering a one-size-fits-all solution, MODAPTO provides a flexible, modular architecture that adapts to specific organizational needs while maintaining the robustness required for industrial applications.

**Core Value Propositions:**

**User Interface** provides an intuitive, comprehensive dashboard that serves as the central command center for manufacturing operations. Built with modern web technologies and responsive design principles, the interface transforms complex industrial data into clear, actionable visualizations that empower users at all levels, from operators to executives, to make informed decisions quickly and efficiently.

**Digital Twin Management** forms the foundation of our approach, creating precise digital representations of manufacturing assets that enable real-time monitoring, simulation, and optimization. These digital twins serve as living models that evolve with the physical systems they represent, providing unprecedented visibility into operations.

**Evaluation and Decision Support** leverages advanced analytics and machine learning to transform raw operational data into actionable insights. The system doesn't just present information – it actively identifies optimization opportunities, predicts potential issues, and recommends specific actions based on deep analysis of operational patterns.

**Production Knowledge Base** centralizes the wealth of information generated by modern manufacturing operations, making it accessible, searchable, and actionable. This eliminates information silos and ensures that valuable operational knowledge is preserved and leveraged across the organization.

**Access Control** ensures that sensitive operational data remains protected while enabling the collaboration and information sharing essential for modern manufacturing. Our security model balances accessibility with protection, implementing industry best practices for authentication, authorization, and data protection.

**Notification Center** creates a responsive operational environment where systems, processes, and personnel stay synchronized. This event-driven approach ensures that important information reaches the right people at the right time, enabling rapid response to changing conditions.

## System Architecture

The MODAPTO System follows a microservices architecture pattern with the following core components:

### Core Components

| Component | Description | Technology Stack |
|-----------|-------------|------------------|
| **Access Control** | User authentication, authorization, and identity management | Spring Boot, OAuth2.0, Keycloak, PostgreSQL |
| **User Interface** | Web-based dashboard and management interface | React, TypeScript, Vite, Material-UI |
| **API Gateway** | Reverse proxy, load balancing, and HTTPS termination | Traefik, Docker |
| **Digital Twin** | Asset simulation and digital twin management | FA³ST Service, Java, FMU Processing |
| **Digital Twin Management** | Orchestration and lifecycle management of digital twins | Spring Boot, Java |
| **Evaluation & Decision Support** | Management of smart services and MODAPTO modules monitoring |
| **Service Catalog** | Service discovery and catalog management | Java |
| **Orchestrator** | Workflow orchestration and process automation | Java |
| **Notification Center** | Real-time notifications and alerts | Spring Boot, WebSocket |
| **Message Bus** | Event streaming and asynchronous communication | Apache Kafka, KRaft, MQTT |
| **Production Knowledge Base** | Data analytics, logging, and monitoring | Elasticsearch, Logstash, Kibana (ELK Stack) |

## Getting Started

### Prerequisites

Before diving into MODAPTO deployment, it's important to ensure your environment meets the system requirements. The platform has been designed to minimize infrastructure complexity while maintaining industrial-grade reliability and performance.

**Essential Requirements:**
- **Docker** (version 18.06.0 or newer) - The backbone of our containerized deployment strategy
- **Docker Compose** (version 1.28.0 or newer) - Orchestrates the multi-service architecture
- **Git** - Essential for managing the submodule architecture and version control

**Development Requirements:**
- **Node.js** 20.13.1 - Required for user interface development and customization
- **Java 11+** - Powers the backend microservices built on Spring Boot
- **htpasswd** utility - Used for securing the API Gateway dashboard

### Installation

The MODAPTO installation process has been streamlined to minimize complexity while ensuring all components are properly configured. Our team has invested considerable effort in creating an installation experience that works reliably across different environments.

**Step 1: Repository Setup**

Begin by cloning the main repository and initializing all submodules. The MODAPTO System uses a modular architecture where each major component is maintained as a separate repository, allowing for independent development and versioning.

```bash
git clone https://github.com/Modapto/Modapto-System.git
cd Modapto-System
git submodule update --init --recursive
cd system-deployment
```

**Step 2: Environment Configuration**

The system's flexibility comes from its comprehensive configuration system. Rather than hard-coding settings, MODAPTO uses environment variables to adapt to different deployment scenarios. This approach ensures the same codebase can serve development, testing, and production environments.


**Critical Configuration Areas:**
- **Gateway URLs**: These determine how users access different parts of the system. Proper domain configuration is essential for security and user experience.
- **Database credentials**: Each service that requires persistent storage needs appropriate database access credentials.
- **Email configuration**: Required for user notifications, system alerts, and account management workflows.
- **Security tokens**: These form the foundation of the system's security model and must be configured carefully.

**Step 3: API Gateway Security**

The API Gateway serves as the single point of entry for all external traffic, making its security configuration critical. We use Traefik as our reverse proxy solution, which provides excellent performance and security features.

Generate secure credentials for administrative access:
```bash
htpasswd -nb [username] [password]
```

Update the configuration files with your specific requirements:
- `api-gateway/config/traefik.toml`: Configure your email address for SSL certificate management
- `api-gateway/config/traefik_dynamic.toml`: Set up authentication credentials and define allowed origins

### Deployment Process

The MODAPTO deployment methodology reflects our commitment to reliability and operational excellence. Rather than attempting to deploy everything simultaneously, we use a carefully orchestrated three-phase approach that ensures each component is properly initialized before dependent services start.

**Phase 1: Foundation Services**

The first phase establishes the fundamental infrastructure components that other services depend on. This includes the API Gateway for traffic routing, the Identity Manager for authentication, and the Production Knowledge Base for logging and monitoring.

```bash
# Linux/macOS
chmod +x setup.sh
./setup.sh

# Windows
setup.bat
```

This initial setup handles several critical tasks: configuring Docker permissions to ensure proper container operation, initializing the Elasticsearch stack for comprehensive logging and monitoring, and deploying both the API Gateway and Identity Manager. These services form the security and operational foundation for the entire platform.

**Phase 2: Security Configuration**

The second phase focuses on establishing the security framework that protects all system interactions. This step is crucial because MODAPTO handles sensitive manufacturing data and requires robust authentication mechanisms.

1. Access the Keycloak administration console at `https://{KEYCLOAK_GATEWAY_URL}`
2. Switch to the **modapto-system** realm (this dedicated realm isolates MODAPTO users from other applications)
3. Navigate to **Clients** and select your client (typically named "modapto")
4. In the **Credentials** tab, regenerate a new client secret token
5. Copy this token value and update your `.env` file under `KEYCLOAK_CLIENT_SECRET`

**Establishing Administrative Access**

For operational management, we recommend creating a super administrator account during the initial setup:

1. Within Keycloak, navigate to **Realm Settings** and click **Actions** in the top-right corner
2. Select **Partial Import** to import pre-configured user data
3. Upload the `init-user-import.json` file which contains the default administrative user template
4. After import, navigate to the **Users** tab to set a secure password for your administrator account

**Phase 3: Complete System Deployment**

With the foundation and security layers established, the final phase brings all manufacturing-specific services online. This includes the digital twin services, decision support systems, and operational management tools.

```bash
docker compose up -d
```

This command initiates the deployment of all remaining services, creating a fully operational manufacturing intelligence platform.

### Accessing Services

After successful deployment, access the services through these URLs:

| Service | URL | Default Port |
|---------|-----|--------------|
| **User Interface** | `https://{UI_GATEWAY_URL}` | 3000 |
| **API Gateway Dashboard** | `https://{TRAEFIK_DASHBOARD_URL}` | 8080 |
| **Keycloak Admin** | `https://{KEYCLOAK_GATEWAY_URL}` | 8080 |
| **Kibana (PKB)** | `https://{KIBANA_GATEWAY_URL}` | 5601 |
| **Kafka UI** | `http://{KAFKA_UI_GATEWAY_URL}` | 8095 |

### System Management

**Stop all services:**
```bash
docker compose down
```

**Stop specific service:**
```bash
docker compose down [service-name]
```

**View logs:**
```bash
docker compose logs -f [service-name]
```

**Update system:**
```bash
git pull
git submodule update --remote --merge
cd system-deployment
docker compose pull
docker compose up -d
```

## Development Environment

### Local Development Setup

1. **Backend Services (Java/Spring Boot)**
   ```bash
   cd [component-directory]
   mvn clean install
   mvn spring-boot:run
   ```

2. **Frontend Development (React/TypeScript)**
   ```bash
   cd user-interface
   npm install
   npm run start
   ```

3. **Message Bus Development**
   ```bash
   cd message-bus
   # Development mode (single broker)
   docker compose -f docker-compose-single-broker.yml up -d
   ```

### Component Development

Each component follows standard development practices:

- **Spring Boot Services**: Maven-based projects with OpenAPI documentation
- **React Frontend**: Vite-based development with TypeScript and Material-UI
- **Docker Containerization**: Multi-stage builds for production optimization
- **Configuration Management**: Environment-based configuration with `.env` support

### Testing

The system includes comprehensive testing at multiple levels:

- **Unit Tests**: Component-specific testing (JUnit 5, Jest)
- **Integration Tests**: Service interaction testing
- **System Tests**: End-to-end workflow validation
- **Performance Tests**: Load and stress testing capabilities

**Running Tests:**
```bash
# Java components
mvn test

# React components
npm run test

# System integration tests documentation
cd testing-documentation

```

## Monitoring and Analytics

### Production Knowledge Base (ELK Stack)

The integrated ELK stack provides comprehensive monitoring:

- **Elasticsearch**: Data storage and search engine
- **Logstash**: Data processing and enrichment
- **Kibana**: Visualization and dashboard creation

**Key Monitoring Features:**
- Real-time system metrics
- Application performance monitoring
- Security event tracking
- Business intelligence dashboards
- Custom alerting and notifications

### Message Bus Analytics

Kafka-based messaging provides:
- Message throughput monitoring
- Topic and partition analytics
- Consumer group performance
- Schema registry management

## Security Framework

MODAPTO implements enterprise-grade security:

### Authentication & Authorization
- **OAuth 2.0 / OpenID Connect** via Keycloak
- **Role-Based Access Control (RBAC)**
- **JWT Token Management**
- **Multi-factor Authentication (MFA) Ready**

### Network Security
- **HTTPS/TLS Encryption** (Let's Encrypt integration)
- **Reverse Proxy Security** (Traefik-based)
- **CORS Protection**
- **Rate Limiting & DDoS Protection**

### Data Protection
- **Encrypted Data Storage**
- **Secure Communication Channels**
- **Audit Logging**
- **GDPR Compliance Ready**

## Scalability and Performance

### Horizontal Scaling
- **Kubernetes Ready**: Container orchestration support
- **Load Balancing**: Automatic traffic distribution
- **Service Discovery**: Dynamic service registration
- **Auto-scaling**: Resource-based scaling policies

### Performance Optimization
- **Caching Strategies**: Redis and in-memory caching
- **Database Optimization**: Connection pooling and query optimization
- **CDN Integration**: Static asset optimization
- **Message Queue Performance**: Kafka partition strategies

## Documentation

### API Documentation
- **OpenAPI 3.0 Specifications** for all REST services
- **Interactive API Explorer** (Swagger UI)
- **Postman Collections** for testing
- **GraphQL Schema** (where applicable)

### Technical Documentation
- **Architecture Decision Records (ADRs)**
- **Component Integration Guides**
- **Troubleshooting Guides**
- **Performance Tuning Guides**

### User Documentation
- **User Manuals** for each component
- **Administrator Guides**
- **API Integration Tutorials**
- **Video Tutorials and Webinars**

## Contributing to MODAPTO

The MODAPTO project thrives on collaboration and welcomes contributions from developers, researchers, and manufacturing professionals who share our vision of advancing industrial digitalization.

### Joining the Development Community

Contributing to MODAPTO means becoming part of a community dedicated to solving real manufacturing challenges through thoughtful technology application. Whether you're fixing bugs, adding features, improving documentation, or sharing insights from industrial deployments, your contributions make a meaningful difference.

**Getting Started with Contributions:**
1. Fork the repository to create your own working copy
2. Create a descriptive feature branch (`git checkout -b feature/ManufacturingOptimization`)
3. Develop your contribution with clear, purposeful commits
4. Push your branch and create a comprehensive pull request
5. Engage with the review process to refine your contribution

### Development Philosophy and Standards

Our development approach balances innovation with industrial reliability. Code contributions should reflect the understanding that MODAPTO systems operate in critical manufacturing environments where stability and performance are paramount.

**Quality Expectations:**
- **Code Clarity**: Write code that tells a story about the manufacturing problem it solves
- **Comprehensive Testing**: Maintain test coverage above 80% to ensure reliability
- **Living Documentation**: Keep documentation current and practical for real deployments
- **Security Mindset**: Every contribution should enhance, not compromise, system security

### Collaborative Review Process

Every contribution benefits from collective expertise through our structured review process:

- **Automated Validation**: Comprehensive CI/CD pipelines verify technical correctness
- **Peer Review**: Multiple team members provide diverse perspectives on each contribution
- **Security Analysis**: Automated scanning identifies potential vulnerabilities before integration
- **Performance Assessment**: Changes are evaluated for their impact on system performance and scalability

## License and Legal

This project has received funding from the European Union's Horizon 2022 research and innovation programme, under **Grant Agreement 101091996**.

For detailed license information, see the [LICENSE](LICENSE) file.

### Third-Party Licenses
- **Berry Material UI Template**: Commercial license (single project use)
- **Elastic Stack**: Elastic License (30-day trial, then Basic License)
- **Keycloak**: Apache License 2.0
- **Apache Kafka**: Apache License 2.0

## Support and Troubleshooting

### Getting Help
- **Documentation**: Check component-specific README files
- **Issues**: Create GitHub issues for bugs and feature requests
- **Discussions**: Use GitHub Discussions for questions and ideas
- **Email Support**: Contact project maintainers

### Common Issues
1. **Port Conflicts**: Ensure required ports are available
2. **Memory Requirements**: Minimum 8GB RAM recommended
3. **Docker Permissions**: Proper Docker daemon access required
4. **Network Configuration**: Firewall and proxy settings

### Health Checks
```bash
# Check all services status
docker compose ps

# Check individual service logs
docker compose logs [service-name]

# Health check endpoints
curl -f http://localhost:8080/health
```

## Contributors and Acknowledgments

### Partner Organizations

MODAPTO is the result of a collaborative effort bringing together leading European research institutions, technology companies, and industrial partners:

- **Athens Technology Center (ATC)**
- **Fraunhofer IOSB**
- **Université de Lorraine (UL)**
- **University of Piraeus Research Center (UPRC)**
- **Athens University of Economics and Business (AUEB)**
- **EKS Intec**
- **BOC Products & Services**
- **AEGIS IT Research**
- **Lithuanian Innovation Centre (LIC)**
- **FFT Produktionssysteme**
- **SEW Usocome**
- **Centro Ricerche Fiat (CRF)**
- **ILTAR-ITALBOX**

---

**MODAPTO System** - Transforming Manufacturing Through Digital Innovation

**Website**: [https://modapto.eu](https://modapto.eu)  
**Contact**: [info@modapto.eu](mailto:info@modapto.eu)  
**GitHub**: [https://github.com/Modapto](https://github.com/Modapto)

---

*Built with dedication for the advancement of manufacturing excellence worldwide*
